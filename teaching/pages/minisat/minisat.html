<!DOCTYPE html>
<html>
<head>
  <title>SAT Solver</title>
  <meta http-equiv="Content-type" content="text/html; charset=utf-8" />
</head>

<body>

<h1>SAT solver</h1>
<p>
Toto je webovÃ© rozhranÃ­ pro SAT solver (<a href="http://minisat.se/"/>MiniSat</a> zkompilovanÃ½ do JavaScriptu <a href="https://github.com/jgalenson/research.js/tree/master/minisat">odsud</a>).
</p>

<h2>VstupnÃ­ formÃ¡t</h2>
<p>
VstupnÃ­ formÃ¡t DIMACS je standardnÃ­ formÃ¡t pro zÃ¡pis formulÃ­ v konjunktivnÃ­ normÃ¡lnÃ­ formÄ› (CNF). Pro pÅ™ipomenutÃ­, CNF je formule ve tvaru konjunkce disjunkcÃ­ (tzv. klauzulÃ­), ve kterÃ© se negace objevujÃ­ pouze pÅ™ed promÄ›nnÃ½mi.
DIMACS soubor vÅ¾dy zaÄÃ­nÃ¡ hlaviÄkou, kterÃ¡ udÃ¡vÃ¡ poÄet promÄ›nnÃ½ch a poÄet klauzulÃ­ ve formuli:
</p>

<div style="background-color: #DDDDDD;width:12cm;">
<pre>
<code>p cnf &lt;pocet-promennych&gt; &lt;pocet-klauzuli&gt;</code>
</pre>
</div>

<p>
DÃ¡le nÃ¡sleduje samotnÃ¡ formule. Jako nÃ¡zvy promÄ›nnÃ½ch jsou pouÅ¾ity celÃ¡ nenulovÃ¡ ÄÃ­sla v rozsahu vymezenÃ©m hlaviÄkou. Negace pÅ™ed promÄ›nnou je zapsÃ¡na pomocÃ­ symbolu <em>mÃ­nus</em> <tt>-</tt>.
JednotlivÃ© klauzule jsou pak zapisovÃ¡ny po Å™Ã¡dcÃ­ch ukonÄenÃ½ch znakem <tt>0</tt> (<tt>0</tt> tedy nelze pouÅ¾Ã­t jako promÄ›nnou).
KomentÃ¡Å™e jsou Å™Ã¡dky zaÄÃ­najÃ­cÃ­ symbolem <tt>c</tt>.
</p>

<p>
NapÅ™Ã­klad, formuli (ğ‘¥â‚) âˆ§ (Â¬ğ‘¥â‚‚ âˆ¨ Â¬ğ‘¥â‚ƒ) âˆ§ (ğ‘¥â‚ âˆ¨ ğ‘¥â‚‚ âˆ¨ ğ‘¥â‚ƒ) lze zapsat jako:

<div style="background-color: #DDDDDD;width:12cm;">
<pre>
<code>p cnf 3 3
1 0
-2 -3 0
1 2 3 0</code>
</pre>
</div>

</p>
VÃ½stupem SAT solveru je pak buÄ Å™etÄ›zec <tt>SAT</tt> spolu s modelem (napÅ™. <tt>SAT 1 2 -3</tt> pro pÅ™edchozÃ­ pÅ™Ã­klad znaÄÃ­, Å¾e ohodnocenÃ­ promÄ›nnÃ½ch
{ğ‘¥â‚â†¦1, ğ‘¥â‚‚â†¦1, ğ‘¥â‚ƒâ†¦0} je modelem formule) pokud je formule splnitelnÃ¡ nebo Å™etÄ›zec <tt>UNSAT</tt> (pokud formule splnitelnÃ¡ nenÃ­).
</p>

<h2>Solver</h2>

Vstup:<br/>
<textarea id='input' cols=60 rows=30>
p cnf 3 3
1 0
-2 -3 0
1 2 3 0
</textarea><br/>
VÃ½stup:<br/>
<textarea id='output' cols=60 rows=10>
</textarea><br/>
<script src="minisat.js"></script>
<script>
  function solve() {
    var solve_string = Module.cwrap('solve_string', 'string', ['string', 'int']);
    var oldPrint = Module.print;
    var oldPrintErr = Module.printErr;
    var outputElem = document.getElementById('output');
    outputElem.value = "";
    Module['print'] = function(x) {
      outputElem.value += x + "\n";
    }
    Module['printErr'] = function(x) {
      outputElem.value += x + "\n";
    }
    try {
      var input = document.getElementById('input').value;
      var startTime = (new Date()).getTime();
      var result = solve_string(input, input.length);
      var endTime = (new Date()).getTime();
     // outputElem.value += 'CPU time: ' + ((endTime - startTime) / 1000) + 's\n';
      outputElem.value += result;
    } catch(e) {
      Module.printErr('Error: ' + e);
    }
    Module.print = oldPrint;
    Module.printErr = oldPrintErr;
  }
</script>
<input value='Solve' type='button' onclick='solve()'>
</body>
</html>
